<p class="h4 text-center mb-4">User Registration</p>

@if (registrationStatus.message === "Not attempted yet") {
<div class="d-flex justify-content-center">
    <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="registration-form p-4 rounded shadow-sm bg-white w-50">

        <!-- Email Field -->
        <mat-form-field appearance="fill" class="w-100 mb-3">
            <mat-label>Email</mat-label>
            <input matInput type="email" formControlName="email" placeholder="Enter your email" />
            @if (registrationForm.get('email')?.invalid) {
                <mat-error>Email is missing or invalid</mat-error>
            }
        </mat-form-field>

        <!-- Password Field -->
        <mat-form-field appearance="fill" class="w-100 mb-3">
            <mat-label>Password</mat-label>
            <input matInput type="password" formControlName="password" placeholder="Enter your password" />
            @if (registrationForm.get("password")?.invalid && registrationForm.get("password")?.touched) {
                <mat-error>Password is missing or invalid</mat-error>
            }
        </mat-form-field>

        <!-- Confirm Password Field -->
        <mat-form-field appearance="fill" class="w-100 mb-4">
            <mat-label>Confirm Password</mat-label>
            <input matInput type="password" formControlName="confirmPassword" placeholder="Confirm your password" />
            @if (registrationForm.get("confirmPassword")?.hasError("required") && registrationForm.get("confirmPassword")?.touched) {
                <mat-error>Confirm Password is required</mat-error>
            }
            @else if (registrationForm.hasError("passwordMismatch") && registrationForm.get("confirmPassword")?.touched) {
                <mat-error>Passwords do not match</mat-error>
            }
        </mat-form-field>

        <!-- Submit Button -->
        <button type="submit" [disabled]="registrationForm.invalid" mat-flat-button color="primary" class="w-100 py-2">
            Register
        </button>

               <!-- Navigate to Login Button -->
        <button type="button" mat-button color="accent" class="w-100 mt-3" [routerLink]="['/app-user-login-component']">
            Have you signed in? Login
        </button>

    </form>
</div>
}
@else {
    <div class="d-flex justify-content-center">
        @if (registrationStatus.success) {
            <div class="alert alert-success mt-3 w-50 text-center shadow-sm">
                <strong>Success:</strong> {{ registrationStatus.message }}
            </div>
            
        }
        @else {
            <div class="alert alert-danger mt-3 w-50 text-center shadow-sm">
                <strong>Error:</strong> {{ registrationStatus.message }}
            </div>
        } 
    </div>
}
